<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/dist/mindar-image.prod.js"></script>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/dist/mindar-image-aframe.prod.js"></script>
  </head>
  <script>
    AFRAME.registerComponent('vidhandler', {
     init: function () {
       this.toggle = false;
       document.querySelector("#Pulse").pause();
       document.querySelector("#Toro").pause(); //reference to the video
     },
     tick: function () {
       if (document.querySelector("#targetx").object3D.visible == true) {
         if (!this.toggle) {
           this.toggle = true;
           document.querySelector("#Pulse").play();
           var userAgent = navigator.userAgent || navigator.vendor || window.opera;
            if( userAgent.match( /iPad/i ) || userAgent.match( /iPhone/i ) || userAgent.match( /iPod/i ) )
            {
              if( document.getElementById("button") !== undefined && document.querySelector("#Pulse").currentTime == 0){
                document.getElementById("button").style.visibility = "visible";
            }
            if(document.querySelector("#Pulse").currentTime = document.querySelector("#Pulse").duration){
              document.getElementById("redirect").style.visibility = "visible";
            }
            }
            else if( userAgent.match( /Android/i ) )
            {
              if(document.querySelector("#Pulse").currentTime = document.querySelector("#Pulse").duration){
                document.getElementById("redirect").style.visibility = "visible";
            }
            }
         } 
       }else {
          this.toggle = false;
          document.querySelector("#Pulse").pause();
        }
      
        if (document.querySelector("#targetx1").object3D.visible == true) {
        if (!this.toggle) {
           this.toggle = true;
           document.querySelector("#Toro").play();
           var userAgent = navigator.userAgent || navigator.vendor || window.opera;
            if( userAgent.match( /iPad/i ) || userAgent.match( /iPhone/i ) || userAgent.match( /iPod/i ) )
            {
              if( document.getElementById("button1") !== undefined && document.querySelector("#Toro").currentTime == 0){
                document.getElementById("button1").style.visibility = "visible";
            }
            if(document.querySelector("#Toro").currentTime = document.querySelector("#Toro").duration){
              document.getElementById("redirect1").style.visibility = "visible";
            }
            }
            else if( userAgent.match( /Android/i ) )
            {
              if(document.querySelector("#Toro").currentTime = document.querySelector("#Toro").duration){
                document.getElementById("redirect1").style.visibility = "visible";
            }
          }
        }}else {
              this.toggle = false;
              document.querySelector("#Toro").pause();
            }
     }
   });
 </script>

<script>
  function myFunction() {
    const btn = document.getElementById("button");
    document.getElementById("button").style.visibility = "hidden";
    document.querySelector("#Pulse").play();
  }
  </script>
  
<script>
  function red() {
    window.location.href='https://ofertas.cvpveiculos.com.br/pulse/'
    document.getElementById("redirect").style.visibility = "hidden"
  }
</script>

<script>
  function myFunction1() {
    const btn = document.getElementById("button1");
    document.getElementById("button1").style.visibility = "hidden";
    document.querySelector("#Toro").play();
  }
  </script>
  
<script>
  function red1() {
    window.location.href='https://ofertas.cvpveiculos.com.br/toro/'
    document.getElementById("redirect1").style.visibility = "hidden"
  }
</script>

 <style>
  .divbutton, .divbutton1{
    position: absolute;
    width: 100%;
    height: 100%;
    display: flex;
    place-content: center;
    place-items: center;
    font-size: 5vw;
  
  }
  .redirect, .redirect1{
    position: absolute;
    z-index: 3;
    width: 100%;
    height: 100%;
    display: flex;
    place-content: center;
    place-items: center;
    font-size: 5vw;
    visibility: hidden;
  }
  .btn{
    width: 80%;
    font-family: 'Montserrat', sans-serif;
    display: flex;
    place-items: center;
    place-content: center;
    gap:4%;
    font-size: 100%;
    padding: 0 5vw;
    background: #1d77ff;
    color: #ffff;
    text-transform: uppercase;
    border-radius:  128px;
    border: none;
    height: 11%;
    visibility: hidden;
  }
  
  i, p{
   margin:0;
   padding: 0;
  }
  </style>

  <body>
    <div class="divbutton">
      <button id="button" onclick="myFunction()" class="btn">
        <i class="fa fa-play" style="color:white;"></i>
        <p>Iniciar Experiência</p>
      </button>
      </div>
      
      <div class="redirect">
        <button id="redirect" onclick="red()" class="btn">
          <p>Saiba mais</p>
        </button>
      </div>

      <div class="divbutton1">
        <button id="button1" onclick="myFunction1()" class="btn">
          <i class="fa fa-play" style="color:white;"></i>
          <p>Iniciar Experiência</p>
        </button>
        </div>
        
        <div class="redirect1">
          <button id="redirect1" onclick="red1()" class="btn">
            <p>Saiba mais</p>
          </button>
        </div>

    <a-scene mindar-image="imageTargetSrc:https://querocar.s3.sa-east-1.amazonaws.com/CVP/targets+(2).mind;" color-space="sRGB" renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">
      <a-assets>
        <video onended="document.getElementById('redirect').style.visibility = 'visible'" id="Pulse" src="https://querocar.s3.sa-east-1.amazonaws.com/CVP/Fiat+Pulse.mp4"></video >
        <video onended="document.getElementById('redirect1').style.visibility = 'visible'" id="Toro" src="https://querocar.s3.sa-east-1.amazonaws.com/CVP/Fiat+Toro.mp4"></video>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <a-entity id="targetx1" mindar-image-target="targetIndex: 0">
        <a-video vidhandler src="#Toro" width="1" height="2" position="0 0 0"></a-video>
      </a-entity>
      <a-entity id="targetx" mindar-image-target="targetIndex: 1">
        <a-video vidhandler src="#Pulse" width="1" height="2" position="0 0 0"></a-video>
      </a-entity>
    </a-scene>
  </body>
</html>